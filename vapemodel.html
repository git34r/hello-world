<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>VAPEMODEL</title>
  <style>
    html,
    body {
      margin: 0;
      width: 100%;
      height: 100%;
      min-height: 100vh;
      overflow: hidden; /* no scrolling */
      color: #111827;
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text",
        system-ui, "Segoe UI", sans-serif;
    }

    body {
      position: relative;
    }

    /* Fullscreen background layer (more reliable than background-attachment: fixed) */
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background: url("kino.gif") center center / cover no-repeat;
      pointer-events: none;
      z-index: -1;
    }

    /* Home link (top-left, blue, stretched) */
    .home-link {
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 40;
      color: #0071e3;
      text-decoration: underline;
      font-size: 28px;
      font-weight: 400;
      letter-spacing: 3px;
      transform: scaleX(1.5);
      transform-origin: left center;
    }

    .home-link:visited {
      color: #0071e3;
    }

    /* Title image centered at top, cropped so extra transparent space doesn't take room */
    .page-title {
      position: fixed;
      top: 12px;
      left: 50%;
      transform: translateX(-50%);
      transform-origin: center center;
      margin: 0;
      z-index: 30;
      height: 80px; /* even tighter visible band */
      overflow: hidden; /* crop extra transparent/white space */
    }

    .page-title img {
      display: block;
      max-width: none;
      height: 320px; /* make the text much bigger */
      object-fit: contain;
      transform: translateY(-120px); /* shift further up so text hugs the top */
    }

    /* Main layout: list on the left, video on the right */
    .main-layout {
      position: absolute;
      inset: 0;
      padding: 125px 32px 80px; /* smaller vertical gap under the title */
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 48px;
      box-sizing: border-box;
    }

    .parts-list {
      flex: 0 0 260px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      font-size: 13px;
      background: transparent; /* no blur/tint behind menu */
      padding: 8px 12px;
      border-radius: 0;
    }

    .part-item {
      all: unset;
      cursor: pointer;
      padding: 6px 0 6px 12px;
      color: #2563eb; /* blue text */
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .part-item-label {
      text-transform: uppercase;
      letter-spacing: 0.16em;
      font-size: 11px;
    }

    .part-item-sub {
      font-size: 13px;
    }

    .part-item:hover {
      color: #facc15; /* yellow on hover */
    }

    .part-item.is-active {
      color: #facc15; /* keep active item yellow */
      font-weight: 700;
    }

    .video-pane {
      flex: 1 1 auto;
      min-width: 0;
      max-width: 900px;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      gap: 8px;
    }

    .video-title {
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: #000000;
      font-weight: 700;
    }

    .video-description {
      font-size: 13px;
      line-height: 1.6;
      color: #000000; /* info text in black */
      max-width: 720px;
      margin: 0 0 4px;
    }

    .vape-video-frame {
      position: relative;
      width: 100%;
      max-width: 700px;
      padding-bottom: 45%; /* slightly smaller height to match reduced width */
      height: 0;
      overflow: hidden;
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.3);
      background: #000;
    }

    .vape-video-frame iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
    }

    /* "press eat" callout at bottom-left */
    .press-eat {
      position: fixed;
      bottom: 28px;
      left: 24px;
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: #000000;
      z-index: 45;
    }

    .press-eat .key-e {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      margin: 0 4px;
      padding: 2px 4px;
      border-radius: 3px;
      border: 1px solid #ef4444;
      color: #ef4444;
      font-size: 1.5em;
      font-weight: 700;
      line-height: 1;
      background: #ffffff;
    }

    /* The popcorn frame overlay fixed to the bottom of the viewport */
    .frame-overlay {
      position: fixed;
      left: 50%;
      bottom: 0;
      transform: translateX(-50%);
      padding-bottom: 0; /* image touches the bottom edge */
      pointer-events: none; /* don't block clicks on the page */
      z-index: 20;
    }

    img#vape-frame {
      display: block;
      max-width: 100vw;
      max-height: 45vh;
      object-fit: contain;
      image-rendering: pixelated;
      image-rendering: crisp-edges;
      transform: scale(1.3);
      transform-origin: center bottom;
    }
  </style>
</head>
<body>
  <a class="home-link" href="index/index.html">home</a>

  <h1 class="page-title">
    <img
      src="https://raw.githubusercontent.com/git34r/hello-world/main/Content/VapemodelTransparentText.png"
      alt="VAPEMODEL"
    />
  </h1>

  <div class="main-layout">
    <div class="parts-list" id="partsList">
      <button class="part-item is-active" type="button" data-part="part1">
        <span class="part-item-label">Episode 1</span>
        <span class="part-item-sub">Origin Story</span>
      </button>
      <button class="part-item" type="button" data-part="part2">
        <span class="part-item-label">Episode 2</span>
        <span class="part-item-sub">Old Enough</span>
      </button>
    </div>

    <div class="video-pane">
      <div class="video-title" id="videoTitle">Episode 1: Origin Story</div>
      <p class="video-description" id="videoDescription">
        [DE] Vape ist nicht alt genug um sich zu kaufen was er möchte, um trotzdem an sein Ziel zu gelangen geht er einen anderen Weg und ruft einen Freund zur Hilfe.<br />
        [EN] Vape is not old enough to buy himself what he wants, to get what he wants he is calling for a friends help.
      </p>
      <div class="vape-video-frame">
        <iframe
          id="videoFrame"
          src="https://www.youtube.com/embed/rXvCHTzxc18"
          title="Vapemodel Player - Shit I broke the Internet – Part 1"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          allowfullscreen
        ></iframe>
      </div>
    </div>
  </div>

  <div class="press-eat">
    press <span class="key-e">E</span>at
  </div>

  <div class="frame-overlay">
    <img id="vape-frame" src="" alt="Vape animation frame" />
  </div>

  <script>
    // Video parts configuration (left list → right video)
    const parts = {
      part1: {
        title: "Episode 1: Origin Story",
        url: "https://www.youtube.com/embed/rXvCHTzxc18",
        description: `
          [DE] Vape ist nicht alt genug um sich zu kaufen was er möchte, um trotzdem an sein Ziel zu gelangen geht er einen anderen Weg und ruft einen Freund zur Hilfe.<br />
          [EN] Vape is not old enough to buy himself what he wants, to get what he wants he is calling for a friends help.
        `,
      },
      part2: {
        title: "Episode 2: Old Enough",
        url: "https://www.youtube.com/embed/k_qe5QTgbxI",
        description: `
          [DE] Mit dem Alter kommen die Entscheidungen, siehe wie Vape Platz für seine Zukunft schafft.<br />
          [EN] With age come decisions, watch Vape create space for his future.
        `,
      },
    };

    const partButtons = document.querySelectorAll(".part-item");
    const videoFrame = document.getElementById("videoFrame");
    const videoTitle = document.getElementById("videoTitle");
    const videoDescription = document.getElementById("videoDescription");

    function selectPart(id) {
      const part = parts[id];
      if (!part || !videoFrame) return;

      videoFrame.src = part.url;
      if (videoTitle) videoTitle.textContent = part.title;
      if (videoDescription) videoDescription.innerHTML = part.description;

      partButtons.forEach((btn) => {
        btn.classList.toggle("is-active", btn.dataset.part === id);
      });
    }

    partButtons.forEach((btn) => {
      btn.addEventListener("click", () => {
        selectPart(btn.dataset.part);
      });
    });

    // Ensure Part 1 is selected on load
    selectPart("part1");

    // Popcorn frame animation configuration
    const FPS = 12;
    const FRAME_INTERVAL = 1000 / FPS; // ~83.3 ms

    // GitHub raw base URL for your frames folder.
    // Repo: git34r/hello-world, folder: FramesPopcorn
    // Files: Frame1.png ... Frame10.png
    const GITHUB_BASE =
      "https://raw.githubusercontent.com/git34r/hello-world/main/FramesPopcorn";

    const TOTAL_FRAMES = 10;
    const framePaths = Array.from({ length: TOTAL_FRAMES }, (_, i) => {
      const index = i + 1;
      return `${GITHUB_BASE}/Frame${index}.png`;
    });

    const imgEl = document.getElementById("vape-frame");

    // State for popcorn animation
    let mode = "idle"; // "idle" | "active"
    let idleIndex = 0; // cycles 0 <-> 1 (frames 1 and 2)
    let idleCounter = 0; // used to slow down idle to ~6 fps
    let activeIndex = 0; // goes 0..9 (frames 1..10)

    // Preload frames to avoid first-frame flicker
    framePaths.forEach((src) => {
      const img = new Image();
      img.src = src;
    });

    // Set initial image to frame 1 from GitHub
    if (imgEl && framePaths.length > 0) {
      imgEl.src = framePaths[0];
    }

    // Keyboard: press "e" or "E" to trigger full 1–10 animation once
    window.addEventListener("keydown", (event) => {
      if (event.key === "e" || event.key === "E") {
        mode = "active";
        activeIndex = 0; // restart from frame 1 each time E is pressed
      }
    });

    function tick() {
      if (!imgEl) return;

      if (mode === "idle") {
        // Loop between frame 1 and 2 at an effective ~6 fps
        // (global timer is 12 fps, we update every other tick)
        idleCounter += 1;
        if (idleCounter % 2 === 0) {
          idleIndex = idleIndex === 0 ? 1 : 0; // 0 <-> 1
          imgEl.src = framePaths[idleIndex];
        }
      } else if (mode === "active") {
        // Play through frames 1..10 at 12 fps, then return to idle loop
        imgEl.src = framePaths[activeIndex];
        activeIndex += 1;

        if (activeIndex >= TOTAL_FRAMES) {
          // Finished 1–10; resume idle 1–2 loop
          mode = "idle";
          idleIndex = 0;
          activeIndex = 0;
          idleCounter = 0;
        }
      }
    }

    // Start the global animation loop
    setInterval(tick, FRAME_INTERVAL);
  </script>
</body>
</html>

